<!-- <header-nav></header-nav> -->
<div class="content-section admin-member-list">
	<top-bar [data]="topBar"></top-bar>
	<div *ngIf="moduleAuthority.edit" class="mt10">
		<button (click)="add()" nz-button [nzType]="'primary'" [nzSize]="'large'">新增会员</button>
	</div>
	<div nz-row class="mt10 mb10">
		<div nz-col [nzSpan]="6" [nzOffset]="12">
			<div nz-form-item nz-row>
				<div nz-form-label nz-col [nzSpan]="10" class="text-right">
					<label for="name">会员名：</label>
				</div>
				<div nz-form-control nz-col [nzSpan]="14">
					<nz-input [(ngModel)]="searchInfo.name" [nzPlaceHolder]="'请输入会员名'" [nzSize]="'large'"></nz-input>
				</div>
			</div>
		</div>
		<div nz-col [nzSpan]="6">
			<div nz-form-item nz-row>
				<div nz-form-label nz-col [nzSpan]="10" class="text-right">
					<label for="status">状态：</label>
				</div>
				<div nz-form-control nz-col [nzSpan]="14">
					<nz-select class="w100"
						[(ngModel)]="searchInfo.status"
						[nzPlaceHolder]="'请选择状态'"
						[nzSize]="'large'"
						nzAllowClear>
						<nz-option [nzLabel]="'可用'" [nzValue]="'1'"></nz-option>
						<nz-option [nzLabel]="'停用'" [nzValue]="'0'"></nz-option>
					</nz-select>
				</div>
			</div>
		</div>
	</div>
	<div class="text-right mt10 mb10">
		<button (click)="search()" nz-button [nzType]="'primary'" [nzSize]="'large'">搜索</button>
	</div>
	<nz-table *ngIf="hasData" #nzTable [nzDataSource]="memberList" [nzBordered]="true" [nzIsPagination]="false">
		<thead nz-thead>
			<tr>
				<th nz-th>会员名</th>
				<!-- <th nz-th>科室折扣</th>
				<th nz-th>科室折扣详情</th>
				<th nz-th class="text-center">辅助治疗折扣</th>
				<th nz-th>辅助治疗折扣详情</th>
				<th nz-th class="text-center">检查折扣</th>
				<th nz-th>药品折扣</th>
				<th nz-th>其他折扣</th> -->
				<th nz-th>赠送金额折扣</th>
				<th nz-th>充值金额</th>
				<th nz-th>状态</th>
				<th nz-th>操作</th>
			</tr>
		</thead>
		<tbody nz-tbody>
			<!-- <ng-container *ngFor="let member of memberList; let indexMember=index;">
				<tr nz-tbody-tr *ngFor="let info of member.infoList; let indexInfo=index; let lastInfo=last;">
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">{{member.name}}</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">{{member.service}}{{member.service && member.service != '' ? '%' : ''}}</td>
					<td nz-td [style.border-bottom]="info.serviceDiscount != '' || lastInfo ? '' : 'none'">
						{{info.serviceDiscount == '' ? '' : info.serviceName + '：'}}{{info.serviceDiscount}}{{info.serviceDiscount == '' ? '' : '%'}}
					</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'" class="text-center">{{member.assist}}{{member.assist && member.assist != '' ? '%' : ''}}</td>
					<td nz-td [style.border-bottom]="info.assistDiscount != '' || lastInfo ? '' : 'none'">
						{{info.assistDiscount == '' ? '' : info.assistName + '：'}}{{info.assistDiscount}}{{info.assistDiscount == '' ? '' : '%'}}
					</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'" class="text-center">{{member.check}}%</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">{{member.prescript}}%</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">{{member.other}}%</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">{{member.status == '1' ? '可用' : '停用'}}</td>
					<td nz-td [attr.rowspan]="member.infoList.length" *ngIf="indexInfo == '0'">
						<button *ngIf="moduleAuthority.edit" (click)="update(member)" nz-button [nzType]="'primary'" [nzSize]="'large'">修改</button>
					</td>
				</tr>
			</ng-container> -->
			<tr nz-tbody-tr *ngFor="let member of memberList">
				<td>{{member.name}}</td>
				<td>{{member.giveScale}}</td>
				<td>{{member.startAmount}}</td>
				<td>{{member.status == '1' ? '可用' : '停用'}}</td>
				<td>
					<button *ngIf="moduleAuthority.edit" (click)="update(member)" nz-button [nzType]="'primary'" [nzSize]="'large'">修改</button>
				</td>
			</tr>
		</tbody>
	</nz-table>
</div>
<loading [show]="loadingShow"></loading>
