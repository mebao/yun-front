<div class="container flex">
	<left-nav [title]="''"></left-nav>
	<div class="right-content flex-1">
		<header-nav [title]="'kkk'"></header-nav>
		<div class="content admin-crm-user">
			<top-bar [data]="topBar"></top-bar>
			<form #f="ngForm" class="pure-form pure-form-stacked">
				<fieldset>
					<div class="flex">
						<div class="w90p mr10 mt10">
							<a class="upload-tab">
								<img id="imgEle" src="../assets/images/img.png">
								<input type="hidden" id="file" name="file" ngModel>
								<input class="upload" type="file" (change)="selectedFile($event)">
							</a>
						</div>
						<div class="flex-1 pure-g">
							<div class="pure-u-8-24 pr10">
								<div class="pure-control-group">
									<label for="mobile">手机号码(默认为账号密码)</label>
									<input type="text" id="mobile" class="form-control" required minlength="11" maxlength="11" name="mobile" [(ngModel)]="user.mobile" #mobile="ngModel"  placeholder="请输入电话号码">
									<div *ngIf="mobile.errors && (mobile.dirty || mobile.touched)" class="alert alert-danger">
									    <div [hidden]="!mobile.errors.required">
									    	手机号码不可为空
									    </div>
									    <div [hidden]="!mobile.errors.minlength">
									    	手机号码至少11位
									    </div>
									    <div [hidden]="!mobile.errors.maxlength">
									    	手机号码最多11位
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pl5 pr5">
								<div class="pure-control-group">
									<label for="user_name">用户名(用作登陆)</label>
									<input id="user_name" type="text" name="user_name" [(ngModel)]="user.user_name" #user_name="ngModel" placeholder="请输入用户名" required="">
									<div *ngIf="user_name.errors && (user_name.dirty || user_name.touched)" class="alert alert-danger">
									    <div [hidden]="!user_name.errors.required">
									    	用户名不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pl10">
								<div class="pure-control-group">
									<label for="real_name">真实姓名</label>
									<input id="real_name" type="text" name="real_name" [(ngModel)]="user.real_name" #real_name="ngModel" placeholder="请输入真实姓名" required="">
									<div *ngIf="real_name.errors && (real_name.dirty || real_name.touched)" class="alert alert-danger">
									    <div [hidden]="!real_name.errors.required">
									    	真实姓名不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pr10">
								<div *ngIf="editType == 'create'" class="pure-control-group">
									<label for="role">角色</label>
									<select id="role" name="role" [(ngModel)]="user.role" #role="ngModel" (change)="roleChange($event.target.value)" required="">
										<ng-container *ngFor="let role of roles">
											<option value="{{role.id}}">{{role.name}}</option>
										</ng-container>
									</select>
									<div *ngIf="role.errors && (role.dirty || role.touched)" class="alert alert-danger">
									    <div [hidden]="!role.errors.required">
									    	角色不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24"></div>
							<div class="pure-u-8-24"></div>
							<div class="pure-u-8-24 pr10">
								<div class="pure-control-group" *ngIf="addDoctor">
									<label for="gender">性别</label>
									<select id="gender" name="gender" [(ngModel)]="user.gender" #gender="ngModel" required="">
										<option value="M">男</option>
										<option value="F">女</option>
									</select>
									<div *ngIf="gender.errors && (gender.dirty || gender.touched)" class="alert alert-danger">
									    <div [hidden]="!gender.errors.required">
									    	性别不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pl5 pr5">
								<div class="pure-control-group" *ngIf="addDoctor">
									<label for="academical_title">学术职称</label>
									<select id="academical_title" name="academical_title" [(ngModel)]="user.academical_title" #academical_title="ngModel" required="">
										<ng-container *ngFor="let academic of academicTitle">
											<option value="{{academic.id}}">{{academic.name}}</option>
										</ng-container>
									</select>
									<div *ngIf="academical_title.errors && (academical_title.dirty || academical_title.touched)" class="alert alert-danger">
									    <div [hidden]="!academical_title.errors.required">
									    	学术职称不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pl10">
								<div class="pure-control-group" *ngIf="addDoctor">
									<label for="clinical_title">医生职称</label>
									<select id="clinical_title" name="clinical_title" [(ngModel)]="user.clinical_title" #clinical_title="ngModel" required="">
										<ng-container *ngFor="let clinical of clinicalTitle">
											<option value="{{clinical.id}}">{{clinical.name}}</option>
										</ng-container>
									</select>
									<div *ngIf="clinical_title.errors && (clinical_title.dirty || clinical_title.touched)" class="alert alert-danger">
									    <div [hidden]="!clinical_title.errors.required">
									    	医生职称不可为空
									    </div>
									</div>
								</div>
							</div>
							<div class="pure-u-8-24 pr10">
								<div class="pure-control-group" *ngIf="addDoctor">
									<label for="description">医生简介</label>
									<textarea id="description" name="description" [(ngModel)]="user.description" #description="ngModel" class="w100" required=""></textarea>
									<div *ngIf="description.errors && (description.dirty || description.touched)" class="alert alert-danger">
									    <div [hidden]="!description.errors.required">
									    	医生简介不可为空
									    </div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="text-center">
						<button (click)="create(f); $event.stopPropagation();" class="pure-button pure-button-primary mt10">{{editType == 'create' ? '创建' : '修改'}}</button>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
</div>
<modal-toast modalTab="{{toast.show}}" text="{{toast.text}}" type="{{toast.type}}"></modal-toast>