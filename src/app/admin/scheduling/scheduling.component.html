<div class="container flex">
	<left-nav></left-nav>
	<div class="right-content flex-1">
		<header-nav></header-nav>
		<div class="content admin-scheduling-page">
			<div class="x_title">排班</div>
			<div class="button-tab pb10">
				<button (click)="prec()" class="pure-button pure-button-primary">上一周</button>
				<button (click)="now()" class="pure-button pure-button-primary">本周</button>
				<button (click)="next()" class="pure-button pure-button-primary">下一周</button>
			</div>
			<div class="list-tab">
				<div class="pure-g title-tab">
					<div class="pure-u-2-24 title"></div>
					<div class="pure-u-1-24 title">医生</div>
					<div class="pure-u-3-24 title" *ngFor="let title of weektitle">
						<span class="pr5">{{title.title}}</span>
						<span>{{title.date}}</span>
					</div>
				</div>
				<form #f="ngForm" class="pure-form pure-form-stacked">
					<div class="doctor-list">
						<div class="pure-g item" *ngFor="let scheduling of schedulinglist">
							<div class="pure-u-2-24 img-tab pad10 text-center">
								<img src="{{scheduling.avatarUrl}}" />
							</div>
							<div class="pure-u-1-24 info text-center pt20">{{scheduling.realName}}</div>	
							<div class="pure-u-3-24 info pad10" *ngFor="let day of scheduling.weekScheduling; let index=index;">
								<select *ngIf="!day.use" disabled="">
									<option selected="" value="{{day.dutyId}}">{{day.dutyName}}</option>
								</select>
								<select *ngIf="day.use" (change)="configChange(day.id, $event.target.value, scheduling.adminId, scheduling.adminName, day.dutyDay)">
									<ng-container *ngFor="let config of schedulingConfigs">
										<option *ngIf="config.id == day.dutyId" selected="" value="{{config.string}}">
											<span>{{config.name}}</span>
											<span class="pl10">{{config.timeConfig}}</span>
										</option>
										<option *ngIf="(config.status == 1) && !(config.id == day.dutyId)" value="{{config.string}}">
											<span>{{config.name}}</span>
											<span class="pl10">{{config.timeConfig}}</span>
										</option>
									</ng-container>
								</select>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
<div class="modal" *ngIf="modalTab">
	<div class="modal-mask" (click)="close()"></div>
	<div class="container">
		<div class="title">提示</div>
		<div class="content pad10">
			{{this.info}}
		</div>
		<div class="button-tab pad10 text-right">
			<button (click)="close()" class="pure-button pure-button-primary">关闭</button>
			<button (click)="update()" class="pure-button pure-button-primary">确认</button>
		</div>
	</div>
</div>
<modal-toast modalTab="{{toast.show}}" text="{{toast.text}}" type="{{toast.type}}"></modal-toast>