<!-- <header-nav></header-nav> -->
<div class="content-section admin-crm-user-list">
	<top-bar [data]="topBar"></top-bar>
	<div class="mt10">
		<div>
			<button *ngIf="moduleAuthority.add" (click)="add()" nz-button [nzType]="'primary'" [nzSize]="'large'"><span>新增员工</span></button>
		</div>
		<div nz-row [nzGutter]="40" class="mt10 mb10">
			<div nz-col [nzSpan]="6">
				<div nz-form-item nz-row>
					<div nz-form-label nz-col [nzSpan]="10" class="text-right">
						<label for="name">姓名：</label>
					</div>
					<div nz-form-control nz-col [nzSpan]="14">
						<nz-input [nzId]="name" [(ngModel)]="searchInfo.name" [nzSize]="'large'" [nzPlaceHolder]="'请输入姓名'"></nz-input>
					</div>
				</div>
			</div>
			<div nz-col [nzSpan]="6">
				<div nz-form-item nz-row>
					<div nz-form-label nz-col [nzSpan]="10" class="text-right">
						<label for="mobile">手机号码：</label>
					</div>
					<div nz-form-control nz-col [nzSpan]="14">
						<nz-input [nzId]="mobile" [(ngModel)]="searchInfo.mobile" [nzSize]="'large'" [nzPlaceHolder]="'请输入手机号码'"></nz-input>
					</div>
				</div>
			</div>
			<div nz-col [nzSpan]="6">
				<div nz-form-item nz-row>
					<div nz-form-label nz-col [nzSpan]="10" class="text-right">
						<label for="role">类型：</label>
					</div>
					<div nz-form-control nz-col [nzSpan]="14">
						<nz-select class="w100" [(ngModel)]="searchInfo.role" [nzPlaceHolder]="'请选择类型'" nzAllowClear [nzSize]="'large'">
							<nz-option [nzValue]="2" [nzLabel]="'医生'">医生</nz-option>
							<nz-option [nzValue]="3" [nzLabel]="'护士'">护士</nz-option>
							<nz-option [nzValue]="9" [nzLabel]="'管理员'">管理员</nz-option>
						</nz-select>
					</div>
				</div>
			</div>
			<div nz-col [nzSpan]="6">
				<div nz-form-item nz-row>
					<div nz-form-label nz-col [nzSpan]="10" class="text-right">
						<label for="clinic_role">角色：</label>
					</div>
					<div nz-form-control nz-col [nzSpan]="14">
						<nz-select class="w100" [(ngModel)]="searchInfo.clinic_role" [nzPlaceHolder]="'请选择角色'" nzAllowClear [nzSize]="'large'">
							<ng-container *ngFor="let clinicRole of clinicRoleList">
								<nz-option [nzValue]="clinicRole.id" [nzLabel]="clinicRole.name"></nz-option>
							</ng-container>
						</nz-select>
					</div>
				</div>
			</div>
		</div>
		<div class="mt10 mb10 text-right">
			<button (click)="search()" nz-button [nzType]="'primary'" [nzSize]="'large'">搜索</button>
		</div>
		<nz-table *ngIf="hasData" #nzTable [nzDataSource]="adminlist" [nzBordered]="true" [nzIsPagination]="false">
			<thead nz-thead>
				<tr>
					<th nz-th></th>
					<th nz-th>姓名</th>
					<th nz-th>手机号码</th>
					<th nz-th>类型</th>
					<th nz-th>角色</th>
					<th nz-th>操作</th>
				</tr>
			</thead>
			<tbody nz-tbody>
				<tr nz-tbody-tr *ngFor="let user of nzTable.data; let index=index;">
					<td nz-td>{{index + 1}}</td>
					<td nz-td>{{user.realName}}</td>
					<td nz-td>{{user.mobile}}</td>
					<td nz-td>{{user.roleText}}</td>
					<td nz-td>{{user.clinicRoleName}}</td>
					<td nz-td>
						<button *ngIf="moduleAuthority.update" (click)="update(user.id)" nz-button [nzType]="'primary'" [nzSize]="'large'"><span>修改</span></button>
						<button *ngIf="moduleAuthority.delete" (click)="delete(user.id)" nz-button [nzType]="'danger'" [nzSize]="'large'"><span>删除</span></button>
					</td>
				</tr>
			</tbody>
		</nz-table>
	</div>
</div>
<div class="modal" *ngIf="modalConfirmTab">
	<div class="modal-mask" (click)="closeConfirm()"></div>
	<div class="container">
		<div class="title">提示</div>
		<div class="content pad10">
			{{selector.text}}
		</div>
		<div class="button-tab pad10 text-right">
			<button (click)="closeConfirm()" class="pure-button">关闭</button>
			<button (click)="confirm()" class="pure-button pure-button-primary" [disabled]="btnCanEdit">确认</button>
		</div>
	</div>
</div>
<modal-toast modalTab="{{toast.show}}" text="{{toast.text}}" type="{{toast.type}}"></modal-toast>
<loading [show]="loadingShow"></loading>
