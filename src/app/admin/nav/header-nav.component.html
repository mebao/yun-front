<nz-header>
	<div class="clinic-title">{{clinicName}}</div>
	<ul nz-menu [nzMode]="'horizontal'" style="line-height: 64px;">
		<li nz-menu-item (click)="logout()">退出</li>
		<li nz-submenu>
        	<span title>主题</span>
        	<ul>
      			<li nz-menu-item (click)="changeTheme('')">默认</li>
      			<li nz-menu-item (click)="changeTheme('theme_green')">绿色</li>
      			<li nz-menu-item (click)="changeTheme('theme_red')">红色</li>
        	</ul>
      	</li>
		<li nz-submenu>
        	<span title>设置</span>
        	<ul>
      			<li nz-menu-item (click)="goUrl('setupMessage')">消息订阅</li>
        	</ul>
      	</li>
		<li nz-menu-item (click)="showTab('showMessage')">消息</li>
		<li nz-menu-item *ngIf="hasShowPayMessage" (click)="showTab('showPayMessage')">
			<nz-badge [nzCount]="payMessageList.length">
		      	<ng-template #content>
		        	支付消息
		      	</ng-template>
		    </nz-badge>
		</li>
		<li nz-menu-item class="username">{{clinicRole && clinicRole != '' ? clinicRole + '--' : ''}}{{username}}</li>
	</ul>
</nz-header>
<nz-modal [nzVisible]="modalTabMessage" [nzWidth]="900" [nzTitle]="'消息'" [nzContent]="contentMessage" [nzFooter]="footerMessage" (nzOnCancel)="closeMessage()">
    <ng-template #contentMessage>
		<ng-container *ngIf="messageTabType == 'showMessage'">
			<nz-table #nzTable [nzDataSource]="messageList" [nzBordered]="true" [nzIsPagination]="false">
				<thead nz-thead>
					<tr>
						<th>消息内容</th>
						<th>查看</th>
						<th>完成</th>
					</tr>
				</thead>
				<tbody nz-tbody>
					<tr *ngFor="let message of messageList; let index=index;">
						<td>{{message.message}}</td>
						<td>
							<ng-container *ngIf="message.typeId == '2' || message.typeId == '3' || message.typeId == '5'">
								<button (click)="goDetail(message)" nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="messageBtn">查看</button>
							</ng-container>
							<ng-container *ngIf="message.typeId == '1' || message.typeId == '4'">
								-
							</ng-container>
						</td>
						<td>
							<button (click)="complate(message, index, '')" nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="messageBtn">完成</button>
						</td>
					</tr>
				</tbody>
			</nz-table>
		</ng-container>
		<ng-container *ngIf="messageTabType == 'showPayMessage'">
			<nz-table [nzDataSource]="payMessageList" [nzBordered]="true" [nzIsPagination]="false">
				<thead nz-thead>
					<tr>
						<th>消息内容</th>
						<th>查看</th>
						<th>完成</th>
					</tr>
				</thead>
				<tbody nz-tbody>
					<tr *ngFor="let message of payMessageList; let index=index;" [ngClass]="{'pure-table-odd': index%2 != 0}">
						<td>{{message.message}}</td>
						<td>
							<button (click)="goDetail(message)" nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="messageBtn">查看</button>
						</td>
						<td>
							<button (click)="complate(message, index, 'pay')" nz-button [nzType]="'primary'" [nzSize]="'large'" [disabled]="messageBtn">完成</button>
						</td>
					</tr>
				</tbody>
			</nz-table>
		</ng-container>
    </ng-template>
    <ng-template #footerMessage>
        <button nz-button [nzType]="'default'" [nzSize]="'large'" (click)="closeMessage()">
          	关闭
        </button>
    </ng-template>
</nz-modal>
<loading [show]="loadingShow"></loading>
